# 实验七

## 实验目的

- 练习定义和使用函数
- 练习编写程序进行实际问题的计算

## 基础编程

### P7.1 方差

请编写一个函数`var()`，求数组中N个元素的方差。方差$\mathrm{Var}[X]=\mathrm{E}[X-\mathrm{E}[X]]^2$，其中$\mathrm{E}$表示平均值，即方差等于【（所有元素减去它们的平均值）的平方】的平均值。

提示：请你先编写一个求平均值的函数。

请使用下面的代码模板：

```c
#include <stdio.h>

/* BEGIN YOUR CODE */

/* END YOUR CODE */

int main() {
    double a[10];
    int N,i;
    scanf("%d", &N);
    for(i=0;i<N;i++) {
        scanf("%lf", &a[i]);
    }
    printf("%.2f", var(a, N));
    return 0;
}
```

#### 输入

输入有两行：

```
N
a1 a2 ... aN
```

第一行是一个整数N，$1 \leq N \leq 10$。第二行是N个浮点数，$-10 \leq a_i \leq 10, \forall i$。

#### 输出

输出只有一行：

```
var
```

var是a1, a2, ..., aN的方差，保留小数点后两位小数。

#### 示例

输入：

```
5
1 2 3 4 5
```

输出：

```
2.00
```



### P7.2 身份证号码生成器

我国公民的身份证号码共18位，其中前6位代表户口所在地的县（区），第7\~14位为出生日期，15\~16位代表户口所在地的派出所，17位代表性别，而18位校验码是根据前17位计算得出的。计算规则如下：

1. 将前面17位数分别乘以7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2
2. 将所有相乘结果相加
3. 求第2步的和除以11的余数
4. 余数0\~10对应第18位是1,0,X,9,8,7,6,5,4,3,2

现在请你编写函数`genId()`，输入身份证号码的前17位，生成第18位数字。

提示：请你先编写一个将ASCII字符'0'\~'9'转化为int类型数字0\~9的函数。

请使用下面的代码模板：

```c
#include <stdio.h>

/* BEGIN YOUR CODE */

/* END YOUR CODE */

int main() {
    char id[19];
    scanf("%s", id);
    genId(id);
    printf("%s", id);
    return 0;
}
```

#### 输入

输入只有一行：

```
str1
```

str1是由数字组成的长度17个字符的字符串，为身份证号码的前17位

#### 输出

```
str2
```

str2是长度为18的字符串，前17位与str1相同，第18位符合身份证号码的校验码规则。

#### 示例

输入：

```
11010120210101001
```

输出：

```
110101202101010017
```



## 进阶编程

### AP7.1 二次元合肥大炮

合肥大炮曾是科大某老师每年的大作业（后改为流浪地球）。本题目需要你实现一个简化版的二次元合肥大炮。在平面坐标系原点处放置一个大炮，朝第一象限发射一枚球形铁质炮弹（无动力，密度取$7.86\times 10^3 \mathrm{kg/m^3}$），重力方向始终沿y轴负方向且大小不变。请你计算炮弹轨迹与x轴正半轴的交点。

你需要考虑下列因素：

- 重力加速度。合肥地区的重力加速度取$g=9.797\mathrm{m/s^2}$

- 空气阻力。空气阻力用下式计算：
  $$
  F=\frac{1}{2}C\rho Sv^2
  $$
  其中$C$为空气阻力系数，取$0.5$；$\rho$为空气密度，取$1.225\mathrm{kg/m^3}$；$S$为迎风面积，取球形炮弹的截面积；$v$为炮弹相对空气的速度。空气阻力的方向总是与速度方向相反。

你不需要考虑：

- 不同高度、地点的空气密度、重力变化
- 高速运动下的气动加热、涡流等效应
- 空气流动
- 一教金矿导致的重力加速度异常
- ……

请你采用迭代的方法计算炮弹最终的落点，每次迭代的时间步长取0.00001秒。炮弹落点保留到整数即可。注意使用函数来进行重复性的计算工作。

#### 输入

输入只有一行：

```
vx vy r
```

vx, vy, r是三个浮点数，分别是炮弹的水平初速度、垂直初速度和半径（国际单位制）。$0 < v_x \leq 100$，$0 < v_y \leq 100$，$0.1 \leq r \leq 0.5$。

#### 输出

输出只有一行：

```
x
```

x为炮弹轨迹与x轴正半轴的交点（四舍五入保留整数）。

#### 示例

输入：

```
50 50 0.3
```

输出：

```
491
```

#### 提示

- 可以使用`<math.h>`中提供的函数，为确保精度，所有的计算请使用double类型进行
  - pow计算乘方
  - atan计算反正切（返回弧度，范围为$-\pi \sim \pi$）
  - sin和cos计算正、余弦，参数为弧度
- 在每个时间步内，可以认为炮弹做**匀加速直线运动**
- 由于时间步长取的足够短，可以把炮弹的y坐标第一次小于0时的x值当作炮弹落点
- $\pi$取$3.14159265358979324$



### AP7.2 厕所规划

此问题来源于毕导THU的视频：*男同胞福音！如何解决尿尿时最尴尬的难题？建议偷偷收藏*

设一个男厕所中有一排共N个坑位，男生依次进入该厕所，并满足如下定律：

1. 【就近定律】第一个进入的男生总是使用第一个坑位
2. 【尴尬定律】男生总是独立进入厕所，并选择距离左右男生尽量远的坑位
3. 【泡利不相容定律】男生永远不会挨着上厕所

每个男生使用厕所的时间为无限长，请编程求解一个N个坑位的厕所最多能容纳多少男生同时使用。【禁止直接使用通项公式计算】

如果没有思路，请参考视频[https://www.bilibili.com/video/BV1RT4y1j7pP](https://www.bilibili.com/video/BV1RT4y1j7pP)

**附加问题：**如果该厕所是环形的，该如何求解？（无需编程，口述思路）

**附加问题：**如果让你来设计厕所，你应该设计多少个坑位来使得坑位的利用率尽量高？（自己思考即可，不检查。毕导视频里有答案）

#### 输入

输入只有一行：

```
N
```

N为小便池的个数，$1\leq N \leq 2147483646$

#### 输出

```
m
```

m为最多能同时使用该厕所的男生数量


#### 示例

- 示例1

  - 输入

  ```
  1
  ```

  - 输出

  ```
  1
  ```

- 示例2

  - 输入

  ```
  2
  ```

  - 输出

  ```
  1
  ```

- 示例3

  - 输入

  ```
  7
  ```

  - 输出

  ```
  3
  ```

#### 提示

每个N>4的问题都可以分解为两个子问题，因为前两个男生必定使用两端的坑位，第三个男生必定使用中间的坑位，于是以中间的男生为界，左右两半部分分别是一个规模更小的厕所规划问题。据此可以分别列出当N是奇数或偶数时，问题的递推方程，从而可以将其转化为一个递归求解问题。

